{% extends "base.html" %}

{% load i18n %}
{% load bootstrap_tags %}

{% block head_title %}ITT Report{% endblock %}

{% block middle %}
<section class="container">
    <h1 class="text-3xl font-bold pb-2">ITT Report</h1>
    
    <div class="grid grid-cols-3 gap-5">
        <div class="flex flex-col bg-gray-200 shadow-md rounded-lg p-6 mx-auto w-64">
            <div class="flex justify-between items-center">
                <div class="text-gray-700 font-bold text-xl">Active Users</div>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="h-6 w-6 text-gray-500">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </div>
            <div class="mt-2 text-3xl font-semibold text-gray-900">{{ active_users }}</div>
            <div class="mt-2 text-gray-600">14% more than last month</div>
        </div>

        <div class="flex flex-col bg-gray-200 shadow-md rounded-lg p-6 mx-auto w-64">
            <div class="flex justify-between items-center">
                <div class="text-gray-700 font-bold text-xl">Staff Users</div>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="h-6 w-6 text-gray-500">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </div>
            <div class="mt-2 text-3xl font-semibold text-gray-900">{{ staff_count }}</div>
        </div>

        <div class="flex flex-col bg-gray-200 shadow-md rounded-lg p-6 mx-auto w-64">
            <div class="flex justify-between items-center">
                <div class="text-gray-700 font-bold text-xl">Active Users Current Month</div>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="h-6 w-6 text-gray-500">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </div>
            <div class="mt-2 text-3xl font-semibold text-gray-900">{{ active_users_current_month }}</div>
        </div>
    </div>
    <hr/>

    <h3>Users Per Position</h3>
    <table class="min-w-full divide-y divide-gray-200 mb-10">
        <thead class="bg-gray-50">
            <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Position</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total User Count</th>
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            {% for user in users_per_position %}
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap">{{ user.position }}</td>
                    <td class="px-6 py-4 whitespace-nowrap">{{ user.user_count }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    <hr/>

    
    <h3>Users Per Country</h3>
    <table class="min-w-full divide-y divide-gray-200 mb-10">
        <thead class="bg-gray-50">
            <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Country</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total User Count</th>
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            {% for user in users_per_country %}
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap">{{ user.country }}</td>
                    <td class="px-6 py-4 whitespace-nowrap">{{ user.user_count }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    <hr/>

    <h3>Users Per Organization</h3>
    <table class="min-w-full divide-y divide-gray-200 mb-10">
        <thead class="bg-gray-50">
            <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Organization</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total User Count</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Active User Count</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Inactive User Count</th>
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            {% for org in users_per_org %}
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap">{{ org.organization }}</td>
                    <td class="px-6 py-4 whitespace-nowrap">{{ org.user_count }}</td>
                    <td class="px-6 py-4 whitespace-nowrap">{{ org.active_user_count }}</td>
                    <td class="px-6 py-4 whitespace-nowrap">{{ org.inactive_user_count }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

</section>
{% endblock middle %}
